<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Falconstead</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Suppressing the favicon error -->
    <link rel="icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAA..." />
</head>

<!-- <script src="./websocket_client/js/htx_okx_spread_order.js"></script> -->
<script src="./websocket_client/js/manual_spread_order.js"></script>

<link href="./websocket_client/css/statusbadge.css" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link rel="stylesheet" href="websocket_client/css/arbButton.css">
<!-- <link rel="stylesheet" href="websocket_client/css/util.css"> -->
<link rel="stylesheet" href="websocket_client/css/algoTable.css">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">

<!-- sorting table -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<!-- Include this once in your HTML -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="./websocket_client/js/update_currency_based_on_mkt_type.js"></script>





<body >
    
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold fs-4 p-3" href="#">Falconstead</a>
            <div class="ms-auto d-flex align-items-center gap-2">
                <span class="fs-6 welcome-text">Welcome,</span>
                <span id="username_intro" class="welcome-text fw-semibold"></span>
            </div>
            <script> document.getElementById('username_intro').innerHTML = localStorage.getItem('username')</script>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

         

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" id="navbar-links">
                  <!-- Login Link (Visible when logged out) -->
                  <li class="nav-item" id="login-link">
                    <a class="nav-link" href="auth.html">Login</a>
                  </li>
                  
                  <!-- Combined Logout and Dark Mode (Visible when logged in) -->
                  <li class="nav-item d-flex align-items-center" id="logout-link" style="display: none;">
                    <div class="form-check form-switch me-3">
                      <input class="form-check-input" type="checkbox" id="darkModeSwitch">
                      <label class="form-check-label text-white" for="darkModeSwitch">Dark Mode</label>
                    </div>
                    <a class="nav-link logout-btn" href="#" onclick="logout()">Logout</a>
                  </li>
                </ul>
              </div>

        </div>
    </nav>
    <!-- notification-hub  -->
    <div id="alertBox" class="alert alert-dark  alert-dismissible fade show mb-0 rounded-0" role="alert">

        <div  class="container-fluid d-flex justify-content-between align-items-center">
            <div>
                <strong id="alertMessage">‚ö†Ô∏è Liquidation Warning!</strong>
                <span class="ms-2 small">BTC is approaching liquidation threshold</span>
            </div>
            <div>
                <button type="button" class="btn btn-sm btn-danger btn-outline-danger me-2 text-white" onclick="stopTwilioCall()">
                <i class="bi bi-telephone-x "></i> 
                Stop Call
                </button>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            
        </div>

        <script>

            // Simulate condition for triggering warning
            function checkCondition() {
                console.log("Condition checked")
                const formdata = new FormData();
                formdata.append("username", localStorage.getItem('username'));
                const check_alert_status = {
                    method: "POST",
                    body: formdata,
                };
                fetch(`http://${hostname}:9000/check_alert_status`, check_alert_status)
                .then((response) => response.json())
                .then((result) =>
                    {
                    console.log(result)
                    if (result.status == "INACTIVE"|result.status == "ACTIVE_ACKED"|result.status == "RESOLVED"){
                        console.log(result.status)
                        document.getElementById('alertBox').style.display = "None"
                        // document.getElementById('alertBox').style.display = "block"

                    }else{
                        document.getElementById('alertBox').style.display = "block"
                    }

                    // if (result['answered'] || result['running']) {
                    //     // Do something here
                    //     console.log("Alert status triggered:", result);
                    // }
                })
                .catch((error) => console.error(error));
            
            }
            document.addEventListener('DOMContentLoaded', checkCondition);


        </script>
    </div>


    <div class="container-fluid p-0 background">

            

            <!-- WARNING ALERT -->
            <!-- <div class = "row px-4 ">
                <div id="alertBox" class="text-center alert alert-dark alert-dismissible fade show " role="alert">
                    <strong id="alertMessage">‚ö†Ô∏è Liquidation Warning!</strong>
                    <button type="button" class="btn btn-danger btn ms-3" onclick="stopTwilioCall()">Stop Call</button>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            </div> -->
        </div>

        <!-- Main Content -->

        <div class="container-fluid px-4 pt-3">
            <!-- Control Bar -->
            <div class="shadow-sm mb-3" style="z-index: 1020;">
                <div class="d-flex align-items-center overflow-auto hide-scrollbar">
                    <!-- Market Selector -->
                    <div class="d-flex align-items-center me-3 flex-shrink-0 px-3">
                        <select id="market-type" class="form-select form-select-sm border-0 shadow-none  rounded-pill" onchange="updateCurrencyOptions()">
                        <option value="">Market</option>
                        <option value="perp" selected>PERP/FUTURES</option>
                        <option value="spot">Spot</option>
                        </select>
                    </div>
                    <!-- Currency Selector -->
                    <div class="d-flex align-items-center me-3 flex-shrink-0">
                        <i class="bi bi-currency-dollar text-muted me-2"></i>
                        <select id="fundingrate-currency-input" class="form-select form-select-sm border-0 shadow-none  rounded-pill">
                        </select>
                    </div>

                    <!-- Centered "FUNDING RATE" text -->
                    <div class="position-absolute start-50 translate-middle-x">
                        <span class="text-muted fw-medium small header-text text-uppercase">
                        FUNDING RATE
                        </span>
                    </div>

                </div>
            </div>

           
           
    

        <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1055;" id="toast-container"></div>


            
        <!-- Exchange Cards -->
            <div class="row g-3 ">
                <!-- OKX Card -->
                <div class="col-md-3 col-sm-6">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body p-3">
                            <!-- Image Row -->
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <img src="./assets/okx.png" alt="OKX Logo" class="default-icon block icon-color-mode" height="24" width="70">
                                <span id="fundingratets-okxperp" class="badge bg-opacity-10 text-warning small">-</span>
                            </div>

                            <!-- Currency Row -->
                            <div class="d-flex justify-content-between align-items-end mb-2"> <!-- Add the same mb-2 here -->
                                <span id="currency-okxperp" class="text-muted small">--</span>
                                <span id="funding-rate-okxperp" class="fw-bold text-primary fs-5">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HTX Card -->
                <div class="col-md-3 col-sm-6">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body p-3">
                            <!-- Image Row -->
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <img src="./assets/htx_white.svg" alt="HTX Logo" class="bn-svg default-icon block icon-color-mode" height="24" width="70">
                                <span id="fundingratets-htxperp" class="badge bg-opacity-10 text-warning small">-</span>
                            </div>

                            <!-- Currency Row -->
                            <div class="d-flex justify-content-between align-items-end mb-2"> <!-- Add the same mb-2 here -->
                                <span id="currency-htxperp" class="text-muted small">--</span>
                                <span id="funding-rate-htxperp" class="fw-bold text-primary fs-5">--</span>
                            </div>
                        </div>
                    </div>
                </div>

        
                <!-- Binance Card -->
                <div class="col-md-3 col-sm-6">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body p-3">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                    <img src="./assets/binance.svg" alt="Binance Logo" class="bn-svg default-icon block " height="24" width="120">
                                <!-- <h6 class="mb-0 fw-semibold text-muted">BINANCE</h6> -->
                                <span id="fundingratets-binanceperp" class="badge  bg-opacity-10 text-warning small">-</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-end">
                                <span id="currency-binanceperp" class="text-muted small">--</span>
                                <span id="funding-rate-binanceperp" class="fw-bold text-primary fs-5">--</span>
                            </div>
                        </div>
                    </div>
                </div>
        
                <!-- Deribit Card -->
                <div class="col-md-3 col-sm-6">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body p-3">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                            
                                  <div class="d-flex ">
                                    <img src="./assets/deribit.svg" alt="Deribit Logo" class="bn-svg default-icon block" height="24" width="30">
                                    <div  class ='fw-bold header-text px-1' >DERIBIT</div>
                                  </div>

                                <span id="fundingratets-deribitperp" class="badge  bg-opacity-10 text-warning small">-</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-end">
                                <span id="currency-deribitperp" class="text-muted small">--</span>
                                <span id="funding-rate-deribitperp" class="fw-bold text-primary fs-5">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- dark mode styling -->
    <style>

        /* Dark mode select dropdowns */
.dark-mode select,
.dark-mode input,
.dark-mode select.form-select ,
.dark-mode .buy-sell-toast-container,
.dark-mode .toast-header{
  background-color: #343a40 !important;
  color: white !important;
  border-color: #495057 !important;
}

.dark-mode select option {
  background-color: #343a40 !important;
  color: white !important;
}

/* Input group styling */
.dark-mode .input-group-text {
  background-color: #495057 !important;
  color: white !important;
  border-color: #495057 !important;
}

/* Hover/focus states */
.dark-mode select:hover,
.dark-mode select:focus {
  border-color: #6c757d !important;
  box-shadow: 0 0 0 0.25rem rgba(130, 138, 145, 0.25) !important;
}
        /* Dark mode support */
.dark-mode {
  color: #ffffff !important; /* Force white text for all elements */
}

.dark-mode *:not(.text-muted):not(.btn-outline-secondary) {
  color: inherit !important; /* Force inheritance for all child elements */
}

.dark-mode .background {
  background-color: #212529;
}

.dark-mode .card {
  background-color: #2c3034;
}

/* Exceptions (optional) */
.dark-mode .text-muted {
  color: #adb5bd !important; /* Light gray for muted text */
}
/* Dark Mode Button Text Colors */
.dark-mode .btn,
.dark-mode .btn * {
  color: white !important;
}

/* Button States - Maintain visibility */
.dark-mode .btn:hover,
.dark-mode .btn:focus,
.dark-mode .btn:active {
  opacity: 0.9;
}

/* Specific Button Types */
.dark-mode .btn-primary {
  background-color: #0d6efd !important;
  border-color: #0d6efd !important;
}

.dark-mode .btn-outline-primary {
  color: #0d6efd !important;
  border-color: #0d6efd !important;
}

.dark-mode .btn-outline-primary:hover {
  background-color: #0d6efd !important;
  color: white !important;
}

/* For your specific alert box button */
.dark-mode #alertBox .btn-danger {
  background-color: #dc3545 !important;
  border-color: #dc3545 !important;
}

/* Button icons */
.dark-mode .btn .bi {
  color: inherit !important;
}
/* Dark mode tabs styling */
.dark-mode .nav-tabs {
  border-bottom-color: #495057; /* Darker border for tab container */
}

.dark-mode .nav-tabs .nav-link {
  color: #adb5bd; /* Inactive tab text color */
  background-color: transparent;
}

.dark-mode .nav-tabs .nav-link:hover {
  color: #ffffff; /* Hover text color */
  border-color: #495057;
}

.dark-mode .nav-tabs .nav-item.show .nav-link,
.dark-mode .nav-tabs .nav-link.active {
  color: white !important; /* Active tab text */
  background-color: black !important; /* Your requested black background */
  border-color: #495057 #495057 black !important; /* Match bottom border to bg */
}

/* If using pills variant */
.dark-mode .nav-pills .nav-link.active {
  background-color: black !important;
  color: white !important;
}

/* Dark mode override */
body.dark-mode {
  --bs-body-bg: #212529; /* Dark background color */
  --bs-body-color: #ffffff; /* White text */
  background-color: var(--bs-body-bg) !important;
}

/* If you specifically want pure black in dark mode */
body.dark-mode.force-black {
  --bs-body-bg: #000000;
  background-color: #000000 !important;
}


/* Order Book Colors - Dark Red/Green Theme */

/* Dark Mode Adjustments */
.dark-mode .scrollable-orderbook .asks,
.dark-mode .sell {
  color: #ef5350 !important; /* Slightly brighter dark red */
  /* text-shadow: 0 0 1px rgba(198, 40, 40, 0.5); */
}

.dark-mode .scrollable-orderbook .bids,
.dark-mode .buy {
  color: #66bb6a !important; /* Slightly brighter dark green */
  /* text-shadow: 0 0 1px rgba(46, 125, 50, 0.5); */
}

/* Order Book Table Styling */
.orderBookTable {
  width: 100%;
  font-family: monospace; /* Better for numerical data */
}



/* Dark Mode Adjustments */
.dark-mode .scrollable-lastprice .buy {
  color: #66bb6a !important; /* Brighter green */
}

.dark-mode .scrollable-lastprice .sell {
  color: #ef5350 !important; /* Brighter red */
}

/* Table Enhancements */
.orderBookTable th , .scrollable-lastprice th{
  background-color: #f8f9fa; /* Light header in normal mode */
  font-weight: 500;
}

.dark-mode .orderBookTable th  ,.dark-mode .scrollable-lastprice th {
  background-color: #343a40 !important; /* Dark header */
  color: white !important;
}

.orderBookTable tr:hover , .scrollable-lastprice tr:hover{
  background-color: rgba(0,0,0,0.02); /* Subtle hover */
}

.dark-mode .orderBookTable tr:hover,.dark-mode .scrollable-lastprice tr:hover {
  background-color: rgba(255,255,255,0.05) !important;
}

.dark-mode .rfs-spread-base-cell{
    background-color: rgba(255,255,255,0.05) !important;;
}

.dark-mode .OMStable thead th {
    background-color: rgba(255,255,255,0.05) !important;;

}

.black-image {
    filter: grayscale(100%) brightness(0) contrast(100%);
}

.invalid-select {
    border: 1px solid #ccc; /* Normal border color */
}

/* For dark mode: when inside .dark-mode class */
.dark-mode .invalid-select {
    border: 1px solid red; /* Red border when inside dark mode */
}

.toast-body.text-error {
  color: #dc3545 !important; /* Bootstrap red */
}

    </style>
    <!-- dark mode script -->
      
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        

      
        // Toggle dark mode
        document.getElementById('darkModeSwitch').addEventListener('change', function() {
        document.body.classList.toggle('dark-mode', this.checked);
            // Save preference to localStorage
            localStorage.setItem('darkMode', this.checked);
            });
        // Initialize dark mode from localStorage
        if (localStorage.getItem('darkMode') === 'true') {
        document.getElementById('darkModeSwitch').checked = true;
            document.body.classList.add('dark-mode');
        }
        // Timeframe filter buttons
        document.querySelectorAll('.btn-group button').forEach(button => {
            button.addEventListener('click', function() {
            document.querySelector('.btn-group .active').classList.remove('active');
            this.classList.add('active');
            // Add your filter logic here
            });
        });
        isDark = localStorage.getItem('darkMode') === 'true'; 

        console.log('isdark?',isDark)
            if (!isDark) {
                // Apply the 'dark-image' class to each .black-image element for dark mode
                document.querySelectorAll('.icon-color-mode').forEach(logo => {
                    logo.classList.add('black-image');
                });
            } else {
                // Remove the 'dark-image' class when dark mode is disabled
                document.querySelectorAll('.icon-color-mode').forEach(logo => {
                    logo.classList.remove('black-image');
                });
            }



    });
        

    document.getElementById('darkModeSwitch').addEventListener('change', function() {
        const isDark = this.checked;
        document.body.classList.toggle('dark-mode', isDark);
        
        // Force redraw of select elements
            document.querySelectorAll('select').forEach(select => {
                select.style.display = 'none';
                select.offsetHeight; // Trigger reflow
                select.style.display = '';
            });

            

            document.querySelectorAll('.btn').forEach(btn => {
                btn.classList.toggle('dark-mode', isDark);
            });
            document.querySelectorAll('.nav-link').forEach(tab => {
                tab.style.display = 'none';
                void tab.offsetHeight;
                tab.style.display = '';
            });
            
            console.log(isDark)

            if (!isDark) {
                // Apply the 'dark-image' class to each .black-image element for dark mode
                document.querySelectorAll('.icon-color-mode').forEach(logo => {
                    logo.classList.add('black-image');
                });
            } else {
                // Remove the 'dark-image' class when dark mode is disabled
                document.querySelectorAll('.icon-color-mode').forEach(logo => {
                    logo.classList.remove('black-image');
                });
            }

            

        });
        

     
    </script>


    <div class="container-fluid p-0 background ">
        <!-- This section will be visible if the JWT is NOT present -->
        <div id="loginPrompt" class="alert alert-warning text-center">
            <h4>You are not logged in.</h4>
            <p>Please log in to access secured content.</p>
        </div>
        
       


        <!-- this row is the entire display and ordering row-->
        <div class = "row justify-content-center m-4">
            <!-- DISPLAY TABLE -->
            <!-- <div class="col-lg-7 shadow-sm rounded rounded-lg border p-4 " id="orderbookdisplayContainer " style="margin-right: 12px;"> -->
            <div class="col shadow-sm rounded rounded-lg border p-4 " id="orderbookdisplayContainer " style="margin-right: 12px;">


                <div class="row">
                <!-- ORDERBOOK DISPLAY -->
                <div class="py-1 my-2 text-center">
                    <span class="px-3 text-muted fw-medium small text-uppercase header-text">
                      ORDERBOOK DISPLAY
                    </span>
                  </div>
                

                        <div class="m-0 p-0">
                        <!-- CHOICES FOR LEADING AND LAGGING EXCHANGES -->
                            <div class="container">
                                <div class="row align-items-center">

                                    <div class="col-md-3 col-sm-12 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="bi bi-graph-up"></i>
                                            </span>
                                            <select id="market-type-orderbook1" class="form-select" onchange="updateCurrencyOptionsOrderbook1()">
                                                <option value="">Select Market</option>
                                                <!-- <option value="spot" selected>SPOT</option> -->
                                                <option value="perp" selected>PERP/FUTURES</option>
                                                <!-- <option value="futures">FUTURES</option> -->
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Currency Input -->
                                    <div class="col-md-3 col-sm-12 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-currency-dollar"></i></span>
                                            <select id="currency-input-orderbook1" class="form-select" aria-label="Currency" onchange="updateCurrency()">
                                                <option value="">Select Currency</option>
                               
                                            </select>
                                        </div>
                                    </div>


                                    <div class="col-md-3 col-sm-12 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="bi bi-graph-up"></i>
                                            </span>
                                            <select id="market-type-orderbook2" class="form-select" onchange="updateCurrencyOptionsOrderbook2()">
                                                <option value="">Select Market</option>
                                                <!-- <option value="spot" selected>SPOT</option> -->
                                                <option value="perp" selected>PERP/FUTURES</option>
                                                <!-- <option value="futures">FUTURES</option> -->
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Currency Input -->
                                    <div class="col-md-3 col-sm-12 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-currency-dollar"></i></span>
                                            <select id="currency-input-orderbook2" class="form-select" aria-label="Currency" onchange="updateCurrency()">
                                                <option value="">Select Currency</option>
                               
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Exchange 1 -->
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="input-group">
                                            
                                            <span class="input-group-text"><i class="bi bi-building"></i></span>
                                            <select id="exchange1-input" class="form-select" aria-label="Exchange 1" onchange="updateExchange(1)" >
                                                <option value="">Select Exchange 1</option>
                                                <option value="okx" selected>OKX</option>
                                                <option value="htx">HTX</option>
                                                <option value="binance">Binance</option>
                                                <option value="deribit">Deribit</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- HTX Open/Close (1) -->
                                    <div id="htx-open-close-wrapper1" class="col-md-3 col-sm-6 mb-3" style="visibility: hidden;">
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-gear"></i></span>
                                            <select id="htx-open-close-1" class="form-select" aria-label="Open/Close">
                                                <option value="">--Not Selected--</option>
                                                <option value="open">OPEN</option>
                                                <option value="close">CLOSE</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Exchange 2 -->
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-building"></i></span>
                                            <select id="exchange2-input" class="form-select" aria-label="Exchange 2" onchange="updateExchange(2)" >
                                                <option value="">Select Exchange 2</option>
                                                <option value="okx">OKX</option>
                                                <option value="htx" selected>HTX</option>
                                                <option value="binance">Binance</option>
                                                <option value="deribit">Deribit</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- HTX Open/Close (2) -->
                                    <div id="htx-open-close-wrapper2" class="col-md-3 col-sm-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-gear"></i></span>
                                            <select id="htx-open-close-2" class="form-select" aria-label="Open/Close">
                                                <option value="">--Not Selected--</option>
                                                <option value="open">OPEN</option>
                                                <option value="close">CLOSE</option>
                                            </select>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <!-- ORDERBOOK AND LAST TRADE SCROLLABLE TABLES -->
                        <div class="">
                        
                            <div class="container pb-3">
                                <div class="row ">
                                    <!-- First Exchange Last Prices -->
                                    <div class="col-md-3">
                                        <div class="card shadow-sm">
                                            <div class="card-body py-0 my-0">
                                                <h5 id="lastTrade-header-1" class="text-center ">Last Trades</h5>
                                                <!-- Row for Exchange and Currency -->
                                            </div>

                                            <div class="scrollable-lastprice">
                                               
                                                <table >
                                                    <thead>
                                                        <tr class="text-secondary small">
                                                            <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Ts</th>
                                                            <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Price(USD)</th>
                                                            <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Size</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="lastprice-data-table-body-1">
                                                        <!-- Last price data will be dynamically inserted here -->
                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>
                                    </div>
                                
                                    <!-- leading Order Book Section -->
                                    <div class="col-md-3" >
                                        <div class="">
                                            <div class="container p-0">
                                                <div class="card shadow-sm">
                                                    <div class="card-body py-0 m-0">
                                                        <h5 id="orderbook-header-1" class="text-center">Order Book 1</h5>
                                                        
                                                        <div id="orderbook-timestamp-1" class="text-center">
                                                            <strong></strong> <span>--Not Selected--</span>

                                                            <!-- Timestamp content here -->

                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- <div class="scrollable-orderbook"> -->
                                                <div class="scrollable-orderbook overflow-auto border" id="scrollable-orderbook-1" style="height:290px;">

                                                    <table class="orderBookTable" id="orderBookTable1">
                                                        <thead class="">
                                                            <tr class="text-secondary small">
                                                                <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Price(USD)</th>
                                                                <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Size</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="order-data-table-body-1">
                                                      
                                                        </tbody>
                                                    </table>
                                                  
                                                </div>

                                            </div>
                                        
                                        </div>
                                    </div>

                                    <!-- lagging Order Book Section -->
                                    <div class="col-md-3" >
                                        <div class="">
                                            <div class="container p-0">
                                                <div class="card shadow-sm ">
                                                <div class="card-body py-0 my-0">
                                                    <h5 id="orderbook-header-2" class="text-center ">Order Book 2</h5>
                                            
                                                    <!-- Timestamp -->
                                                    <div id="orderbook-timestamp-2" class="text-center">
                                                        <strong></strong> <span>--Not Selected--</span>
                                                    </div>
                                                </div>
                                                </div>
                                                
                                                <div class="scrollable-orderbook overflow-auto border" id="scrollable-orderbook-2" style="height:290px;">
                                                    <table class="orderBookTable" id="orderBookTable2">
                        
                                                        <thead class="">
                                                            <tr class="text-secondary small">
                                                                <th style="position: sticky; top: 0; ; z-index: 2; text-align: center;">Price(USD)</th>
                                                                <th style="position: sticky; top: 0; ; z-index: 2; text-align: center;">Size</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody id="order-data-table-body-2">
                                                            <!-- Order book data will be dynamically inserted here -->
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                        <!-- Second Exchange Last Prices -->
                                    <div class="col-md-3">

                                            <div class="card shadow-sm ">
                                                <div class="card-body py-0 my-0">
                                                <h5 id="lastTrade-header-2" class="text-center ">Last Trades</h5>
                                                
                                                </div>
                                                <div class="scrollable-lastprice">
                                                    <table >
                                                    <thead>
                                                        <tr class="text-secondary small">
                                                            <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Ts</th>
                                                            <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Price(USD)</th>
                                                            <th style="position: sticky; top: 0; z-index: 2; text-align: center;">Size</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="lastprice-data-table-body-2">
                                                        <!-- Last price data will be dynamically inserted here -->
                                                    </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        
                                    </div>
                                </div>
                            </div>

                        </div>
                                    
                        <!-- BUTTONS FOR COMPARING -->
                        <div class="">
                            <div id="securedContentBidAskOrder" class="" style="display: none;">
                                <!-- Sync and Reset Buttons (Always at the Bottom) -->
                                <div class="rfs-spread-base-cell p-0">
                                    <!-- Header with Bid, Spread, and Ask -->
                                    <div class="RfsSpreadCell_rfs-spread-card-header-container d-flex justify-content-center">
                                        <div class="quote-bps-container d-flex align-items-center ">
                                            <span class="quote-bps-value fw-bold" id="buysellgapPx">-</span>&nbsp;
                                            <span class="quote-bps-unit text-muted">BPS</span>
                                        </div>
                                    </div>
                                    
        
                                    <!-- Card Section for Bid and Ask Prices -->
                                    <div class="RfsSpreadCell_rfs-spread-base-cell-prices d-flex justify-content-center ">
                                        <!-- Bid Card -->
                                        <span id="quote-side-text" class="col quote-side-text text-success text-center fw-bold">
                                            Bid (Buy <span id="arbButton-bid-buy"></span> Sell <span id="arbButton-bid-sell"></span>) 
                                        </span>
                                        <div class="col  quote-price-card buy card p-3 text-center" onclick="handleClick('buy')" role="button" tabindex="0">
                                            <div class="best-quote-price-container">
                                                <div class="price-data fs-4 fw-bold" id="buySpread">-</div>
                                            </div>
                                            <div class="card-bottom-container" >
                                                <div class="card-bottom-quote-diff text-success" id="buySpreadSz">-</div>
                                            </div>

                                        </div>
                                
                                        <!-- Ask Card -->
                                        <div class="col  quote-price-card sell card p-3 text-center border-danger" onclick="handleClick('sell')" role="button" tabindex="0">
                                        
                                            <div class="best-quote-price-container">
                                                <div class="price-data fs-4 fw-bold" id="sellSpread">-</div>
                                            </div>
                                            <div class="card-bottom-container">
                                                <div class="card-bottom-quote-diff text-danger" id="sellSpreadSz">-</div>
                                            </div>

                                        </div>
                                        <span id="quote-side-text" class=" col  quote-side-text text-danger text-center fw-bold ">
                                            Ask (Sell <span id="arbButton-ask-sell"></span> Buy <span id="arbButton-ask-buy"></span>) 
                                        </span>

                                       


        
                                    </div>

                                    <div class="d-flex justify-content-center align-items-center text-center my-2">
                                        <div>
                                            <label for="qty-input" class="form-label mb-1">Quantity:</label>
                                            <input type="number" id="qty-input" class="form-control form-control-sm text-center mx-auto" placeholder="Qty" value="1" style="width: 80px;" required>
                                        </div>
                                    </div>
                                    

                                </div>
                            
                            </div>
                        </div>
                        
                </div>
                
            </div>


            <!-- FORM for ordering -->
            <div class="col shadow-sm rounded rounded-lg border p-4  ">

    
  


  

                <!-- This section will only be visible if the JWT is NOT present -->
                <div id="loginPromptBtn" class="alert alert-warning text-center h-100">
                    <h4>You are not logged in.</h4>
                    <p>Please log in to access secured content.</p>
                    <a href="auth.html" class="btn btn-dark" role="button">Log in</a>
                </div>


                <!-- This section will only be visible if the JWT is present -->
                <div id="securedContent"  class="alert  shadow-sm  rounded rounded-lg" style="display: none;">
                        
                    <div class="">
                        <div class = "text-end ">

                            <button id="notification-icon" class="btn " onclick="toggleNotificationHub()">
                                üõé Notifications <span id="notification-count" class="badge bg-danger">0</span>
                            </button>
                            <div id="notification-hub" class="notification-hub  shadow rounded" style="display: none;">
                                <h5 class="p-2">Notifications</h5>
                                
                                
                                <div id="toast-list" class="toast-list p-2" style="max-height: 300px;overflow-y: auto ; word-wrap:break-word">
                                        <!-- <div>
                                            {"label":"","price":"8.0e4","amount":"100.0","direction":"buy","time_in_force":"good_til_cancelled","max_show":"100.0","instrument_name":"BTC-PERPETUAL","api":true,"web":false,"order_id":"99349428827","creation_timestamp":"1746153663445","mmp":false,"replaced":false,"filled_amount":"0.0","last_update_timestamp":"1746153663445","post_only":false,"reduce_only":false,"average_price":"0.0","contracts":"10.0","order_state":"open",}
                                        </div>
                                     -->
                                    
                                </div>
                                

                                
                               
                                
                                <button class="btn btn-secondary w-100" onclick="clearNotifications()">Clear All</button>
                            </div>
                        </div>
                        
                    </div>
                  

                    <ul class="nav nav-tabs  mb-3"  role="tablist ">
                        <li class="nav-item" role="presentation">
                        <button class="btn nav-link active" id="pills-manual-order-tab" data-bs-toggle="tab" data-bs-target="#pills-manual-order" type="button" role="tab" >Manual Order</button>
                        </li>
                        <li class="nav-item" role="presentation">
                        <button class="btn nav-link" id="pills-algo-order-tab" data-bs-toggle="tab" data-bs-target="#pills-algo-order" type="button" role="tab" disabled>Algo Order</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-manual-order" role="tabpanel" aria-labelledby="pills-manual-order-tab">
                            <!-- MANUAL ORDER FORM Input Section -->
                            <div class="card p-4 ">

                                <form id="order-form">
                                   
                                    <!-- Leading and Lagging Exchanges Section -->
                                    <div class="row g-2 mb-2">
                                        <div class="d-flex">
                                            <label class="form-label col-6">
                                                Leading Exchange
                                                <span class="tooltip-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Your order applies to this exchange">
                                                <i class="bi bi-info-circle"></i>
                                                </span>
                                            </label>
                                            <label class="form-label col-6">
                                                Lagging Exchange
                                            </label>
                                        </div>

                                        <div class="d-flex">
                                            <div class="col form-floating">
                                                <select class="form-select" id="manual-order-form-exchange-input1" aria-label="Exchange Select">
                                                <option value="" disabled>Select Exchange</option>
                                                <option value="none" >EMPTY LEG</option>
                                                <option value="htx">HTX</option>
                                                <option value="okx" >OKX</option>
                                                <option value="deribit" >DERIBIT</option>
                                                <option value="binance" selected>BINANCE</option>


                                                </select>
                                                <label for="manual-order-form-exchange-input1">Exchange</label>
                                            </div>
                                            <div class="col form-floating mx-3">
                                                <select class="form-select" id="manual-order-form-market-type1" aria-label="Market Type Select">
                                                <option value="" disabled>Select Market Type</option>
                                                <option value="spot">SPOT</option>
                                                <option value="perp" selected>PERP/FUTURES</option>
                                                </select>
                                                <label for="manual-order-form-market-type1">Market Type</label>
                                            </div>
                                            <div class="col form-floating">
                                                <select class="form-select" id="manual-order-form-exchange-input2" aria-label="Exchange Select">
                                                <option value="" disabled>Select Exchange</option>
                                                <option value="none" selected>EMPTY LEG</option>
                                                <option value="htx">HTX</option>
                                                <option value="okx" >OKX</option>
                                                <option value="deribit" >DERIBIT</option>

                                                </select>
                                                <label for="manual-order-form-exchange-input2">Exchange</label>
                                            </div>
                                            <div class="col form-floating mx-3">
                                                <select class="form-select" id="manual-order-form-market-type2" aria-label="Market Type Select">
                                                <option value="" disabled>Select Market Type</option>
                                                <option value="spot">SPOT</option>
                                                <option value="perp" selected>PERP/FUTURES</option>
                                                </select>
                                                <label for="manual-order-form-market-type2">Market Type</label>
                                            </div>
                                        </div>


                                    </div>
                                
                                    <!-- Currency and Order Type Section -->
                                    <div class="row g-2 mb-2 ">
                                        <div class="d-flex ">
                                            <div class="col form-floating">
                                                <select class="form-select" id="manual-order-form-offset-input1" aria-label="Offset Select" value = 'none'>
                                                <!-- Offset options will be dynamically populated here -->
                                                </select>
                                                <label for="manual-order-form-offset-input1">Offset</label>
                                            </div>

                                            <div class="col form-floating mx-3">
                                                <select class="form-select" id="manual-order-form-currency-input1" aria-label="Currency Select">
                                                <!-- Currency options will be dynamically populated here -->
                                                </select>
                                                <label for="manual-order-form-currency-input1">Currency</label>
                                            </div>
                                            
                                          
                                            <div class="col form-floating">
                                                <select class="form-select" id="manual-order-form-offset-input2" aria-label="Offset Select" value = ''>
                                                <!-- Offset options will be dynamically populated here -->
                                                </select>
                                                <label for="manual-order-form-offset-input2">Offset</label>
                                            </div>

                                            <div class="col form-floating mx-3">
                                                <select class="form-select" id="manual-order-form-currency-input2" aria-label="Currency Select">
                                                <!-- Currency options will be dynamically populated here -->
                                                </select>
                                                <label for="manual-order-form-currency-input2">Currency</label>
                                            </div>
                                            
                                        </div>
                                    </div>

                                    <div class="mb-2">
                                        <a class="btn btn-link p-0" data-bs-toggle="collapse" href="#orderTypeInfo" role="button" aria-expanded="false" aria-controls="orderTypeInfo">
                                          What do these order types mean?
                                        </a>
                                        <div class="collapse mt-2" id="orderTypeInfo">
                                          <div class="card card-body "style=" font-family: 'Lucida Console', Courier, monospace;">
                                            <strong>LIMIT:</strong> Places an order at a specific price or better. Executes only if the market reaches your price.<br>
                                            <strong>MARKET:</strong> Fills immediately at the best current market price.<br>
                                            <strong>COUNTERPARTY-1:</strong> Sets your order price at the best available opposite market price. For a buy order, this would be the lowest current ask price. For a sell order, it would be the highest bid price.<br>
                                            <strong>COUNTERPARTY-5:</strong> Sets your order price at the fifth best available opposite market price. For a buy order, it would be the fifth lowest ask price. For a sell order, it would be the fifth highest bid price.<br>
                                            <strong>QUEUE-1:</strong> Sets a post-only order with order price at the best price on the same side of the market as your order. For a buy order, this would be the highest current bid price. For a sell order, it would be the lowest ask price.
                                          </div>
                                        </div>
                                      </div>
                                      
                                      

                                    <div class="row g-2 mb-2 ">
                                    
                                        <div class="col form-floating">
                                            
                                            <select class="form-select" id="manual-order-form-order-type1" aria-label="Order Type Select" >
                                            <option value="none" disabled>NA</option>
                                            <option value="limit">LIMIT</option>
                                            <option value="counterparty1" >COUNTERPARTY-1</option>
                                            <option value="counterparty5" >COUNTERPARTY-5</option>
                                            <option value="queue1" selected>QUEUE-1</option>

                                            <option value="market" >MARKET</option>
                                            </select>
                                            <label for="manual-order-form-order-type1">Order Type</label>
                                            
                                        </div>

                                        <div class="col form-floating mx-3">
                                            <select class="form-select" id="manual-order-form-order-type2" aria-label="Order Type Select">
                                            <option value="none" disabled>NA</option>
                                            <option value="limit"  >LIMIT</option>
                                            <option value="counterparty1">COUNTERPARTY-1</option>
                                            <option value="counterparty5" >COUNTERPARTY-5</option>
                                            <option value="queue1" selected>QUEUE-1</option>

                                            <option value="market" >MARKET</option>
                                            </select>
                                            <label for="manual-order-form-order-type2">Order Type</label>
                                        </div>
                                    </div>
                                    
                                    <!-- <div class="bg-light bg-opacity-10">
                                        -----------------   Prices   ----------------- -->

                                        <!-- QTY AND PRICE FIELD -->
                                        <div class="row g-2 mb-2">
                                           
                                            <div class="d-flex ">
                                              <!-- Price 1 Input Field -->
    
                                                <div class="col">
                                                    <label for="manual-order-form-qty-input1" class="form-label">Quantity:</label>
                                                    <input type="number" id="manual-order-form-qty-input1" class="form-control" placeholder="Quantity" value="1" required>
                                                </div>

                                                
                                                <div id="manual-order-form-price-field1" class="col form-label mx-3">
                                                    <label for="manual-order-form-price1" class="form-label">Price:</label>

                                                    <!-- Price Input Field -->
                                                    <input type="number" step=".01" id="manual-order-form-price1" class="form-control" placeholder="Price" value="0" required>
                                                    
                                                    <!-- Buttons for Price -->
                                                    <!-- <div class="input-group-append">
                                                        <button id="add-1000" class="btn btn-sm ">+1000</button>
                                                        <button id="add-10000" class="btn btn-sm ">+10000</button>
                                                        <button id="add-30" class="btn btn-sm ">+30</button>
                                                        <button id="reset" class="btn btn-sm ">RESET</button>
                                                    </div> -->
                                                </div>
                                              
                                                <!-- Price Field 2 -->
                                                <div class="col">
                                                    <label for="manual-order-form-qty-input2" class="form-label">Quantity:</label>
                                                    <input type="number" id="manual-order-form-qty-input2" class="form-control" placeholder="Quantity" value="1" required>
                                                </div>

                                                <div id="manual-order-form-price-field2" class="col form-label mx-3">
                                                    <label for="manual-order-form-price2" class="form-label">Price:</label>

                                                    <!-- Price Input Field -->
                                                    <input type="number" step=".01" id="manual-order-form-price2" class="form-control" placeholder="Price" value="0" onchange="formatNumber()" required>
                                                    <!-- <input type="text" step=".01" id="manual-order-form-price2" class="form-control" placeholder="Price" value="0" onchange="formatNumber(this)" required> -->

                                                    <!-- Buttons for Price -->
                                                    <!-- <div class="input-group-append">
                                                        <button id="add2-1000" class="btn btn-sm ">+1000</button>
                                                        <button id="add2-10000" class="btn btn-sm ">+10000</button>
                                                        <button id="add2-30" class="btn btn-sm ">+30</button>
                                                    </div> -->
                                                </div>

                                            </div>
                                        </div>

                                       
                                    <!-- </div> -->

                                   
                                      

                                  
                                    <script>
                                       
                                  



                                        // Default increment values
                                        let increments = [1000, 10000, 30];
                                    
                                        // Function to update the value in the input field
                                        function updateInputValue(increment,priceNumber) {
                                            let inputField = document.getElementById(`manual-order-form-price${priceNumber}`);
                                            inputField.value = parseFloat(inputField.value) + increment;
                                        }
                                        function resetInputValue(priceNumber) {
                                            let inputField = document.getElementById(`manual-order-form-price${priceNumber}`);
                                            inputField.value = 0
                                        }
                                    
                                        // Event listeners for the +10, +20, +30 buttons
                                        document.getElementById("add-1000").addEventListener("click", function() {
                                          updateInputValue(increments[0],1);
                                        });
                                    
                                        document.getElementById("add-10000").addEventListener("click", function() {
                                          updateInputValue(increments[1],1);
                                        });
                                    
                                        document.getElementById("add-30").addEventListener("click", function() {
                                          updateInputValue(increments[2],1);
                                        });
                                        document.getElementById("reset").addEventListener("click", function() {
                                            resetInputValue(1);
                                        });


                                        document.getElementById("add2-1000").addEventListener("click", function() {
                                          updateInputValue(increments[0],2);
                                        });
                                    
                                        document.getElementById("add2-10000").addEventListener("click", function() {
                                          updateInputValue(increments[1],2);
                                        });
                                    
                                        document.getElementById("add2-30").addEventListener("click", function() {
                                          updateInputValue(increments[2],2);
                                        });
                                    
                                        // Event listener to set custom increment values for the buttons
                                        // document.getElementById("set-custom-increments").addEventListener("click", function() {
                                        //   let customIncrement1 = parseInt(document.getElementById("increment-1").value);
                                        //   let customIncrement2 = parseInt(document.getElementById("increment-2").value);
                                        //   let customIncrement3 = parseInt(document.getElementById("increment-3").value);
                                          
                                        //   if (!isNaN(customIncrement1) && !isNaN(customIncrement2) && !isNaN(customIncrement3)) {
                                        //     increments = [customIncrement1, customIncrement2, customIncrement3];
                                        //     // Update the button labels with new custom increments
                                        //     document.getElementById("add-1000").innerText = `+${customIncrement1}`;
                                        //     document.getElementById("add-10000").innerText = `+${customIncrement2}`;
                                        //     document.getElementById("add-30").innerText = `+${customIncrement3}`;
                                        //     alert(`Button increments updated: +${customIncrement1}, +${customIncrement2}, +${customIncrement3}`);
                                        //   } else {
                                        //     alert("Please enter valid numbers for all increments.");
                                        //   }
                                        // });

                                      </script>


                
                                              
<!--                                         <div class="mb-2">
                                                <label for="increment-1" class="form-label">Button 1 Increment (+)</label>
                                                <input type="number" id="increment-1" class="form-control" placeholder="Enter value for +10" value="10">
                                              </div>
                                              
                                              <div class="mb-2">
                                                <label for="increment-2" class="form-label">Button 2 Increment (+)</label>
                                                <input type="number" id="increment-2" class="form-control" placeholder="Enter value for +20" value="20">
                                              </div>
                                              
                                              <div class="mb-2">
                                                <label for="increment-3" class="form-label">Button 3 Increment (+)</label>
                                                <input type="number" id="increment-3" class="form-control" placeholder="Enter value for +30" value="30">
                                              </div>
                                              
                                              <button id="set-custom-increments" class="btn btn-outline-success mt-2">Set Custom Increments</button>
                                            </div>-->
                                          
                                   

                                    </div>

                                    <div id="form-buy-sell-container">
                                        <div class="d-flex justify-content-between mt-3" >
                                            <button type="submit" id="buy-button" value="buy" class="btn btn-success w-100 me-1">Buy</button>
                                            <button type="submit" id="sell-button" value="sell" class="btn btn-danger w-100 ms-1">Sell</button>
                                        </div>
                                    </div>
                                
                                </form>
                                    
                                    
                                

                                
                            </div>
                        </div>


                        
                        <div class="tab-pane fade " id="pills-algo-order" role="tabpanel" aria-labelledby="pills-algo-order-tab">
                            <div>
                            <!-- Algo Strats Table -->
                            <!-- Algo List Table -->
                            <section >
                                <div class="table-responsive" style="max-height: 520px; overflow-y: auto;">
                                    <table class="table table-hover table-sm align-middle text-nowrap w-100 algo-table">
                                        <thead class="table-light sticky-top">
                                            <tr class="text-uppercase small">
                                                <th class="">Algo Name</th>
                                                <th class="">Lead / Lag</th>
                                                <th class="">Direction / Offset</th>
                                                <th class="">Spread / Qty</th>
                                                <th class="">Currency</th>
                                                <th class="">Instrument / Contract</th>
                                                <th class="">Status</th>
                                                <th class="">On / Off</th>
                                                <th class="">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="algo-list"></tbody>
                                        <tbody id="algo-list-new"></tbody>
                                    </table>
                                </div>
                            
                            </section> 
                            <!-- ALGO ORDER FORM Input Section -->

                                <!-- Button to Open Modal -->
                                <button class="btn btn-dark " onclick="openAlgoModal()">Add New Algo</button>

                                <!-- Modal for Adding/Editing Algo -->
                                <div class="modal" id="algoModal" tabindex="">
                                    
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">

                                            <div class="modal-header">
                                                <h5 class="modal-title" >Add New Algo</h5>
                                                <!-- <button type="button" class="btn-close" onclick="closeAlgoModal()"></button> -->
                                            </div>
                                            
                                            <div class="modal-body">
                                                <form id="new-algoForm">

                                                    <!-- Algo Type and Algo name -->
                                                    <div class="row">
                                                        <div class="input-group mb-3">
                                                            <!-- Input Field -->
                                                            <div class="input-group-prepend">
                                                                <select class="form-select" id="new-algo-type" onchange="setnewAlgoType(this)" required>
                                                                    <option value="" disabled >Select Algo Type</option>
                                                                    <option value="diaoyu" selected>Diaoyu</option>
                                                                    <option value="diaoxia" >Diaoxia</option>
                                                                    <!-- Additional options can be added here -->
                                                                </select>
                                                            </div>

                                                            <input type="text" class="form-control" id="new-algo-name" placeholder="Type algo name" >

                                                        </div>
                                                    </div>

                                                    <!-- Lead and Lag Exchanges -->
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <label for="new-algo-lead-exchange" class="form-label">Lead Exchange</label>
                                                            <select class="form-select" id="new-algo-lead-exchange" >
                                                                <option value="okx" selected>OKX</option>
                                                                <option value="htx">HTX</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="new-algo-lag-exchange" class="form-label" >Lag Exchange</label>
                                                            <select class="form-select" id="new-algo-lag-exchange" >
                                                                <option value="okx">OKX</option>
                                                                <option value="htx" >HTX</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                     <!-- direction and Offset -->
                                                     <div class="row mt-3">
                                                        <div class="col-md-6">
                                                            <label for="new-algo-direction" class="form-label">Direction</label>

                                                            <select class="form-select" id="new-algo-direction">
                                                                <option value="buy">BUY</option>
                                                                <option value="sell" selected>Sell</option>
                                                            </select>

                                                        </div>

                                                        <div class="col-md-6" id="new-algo-offset-container" style="display: none;">
                                                            <label for="new-algo-offset" class="form-label" >Offset</label>

                                                            <select class="form-select" id="new-algo-offset" >
                                                                <option value="open">Open</option>
                                                                <option value="close" selected>Close</option>
                                                            </select>
                                                        </div>

                                                 
                                                        
                                                    </div>

                                                    <!-- Spread and Quantity -->
                                                    <div class="row mt-3">
                                                        <div class="col-md-6">
                                                            <label for="new-algo-spread" class="form-label">Spread</label>
                                                            <input type="number" step="0.01" class="form-control" id="new-algo-spread" placeholder="Enter Spread">
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="new-algo-quantity" class="form-label">Quantity</label>
                                                            <input type="number" class="form-control" id="new-algo-quantity" placeholder="Enter Quantity">
                                                        </div>
                                                    </div>
                                                   


                                                    <!-- Instrument and Contract Type -->
                                                    <div class="row mt-3">
                                                        <div class="col-md-6">
                                                            <label for="new-algo-instrument" class="form-label">Instrument</label>
                                                            <select class="form-select" id="new-algo-instrument" onchange="updateCurrencyOptionsGeneral('new-algo-instrument','new-algo-ccy','new-algo-contract-type-container')">
                                                                <option value="swap" selected>SWAP</option>
                                                                <option value="futures">FUTURES</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="new-algo-ccy" class="form-label">Currency</label>
                                                            <select class="form-select" id="new-algo-ccy">
                                                                <option value="na"  disabled>Select a currency</option>
                                                                <option value="BTC-USD-SWAP" selected >BTC-USD</option>

                                                            </select>
                                                        </div>
                                                        <div class="col-md-6" id="new-algo-contract-type-container" style="display: none;">
                                                            <label for="new-algo-contract-type" class="form-label">Contract Type</label>
                                                            <select class="form-select" id="new-algo-contract-type">
                                                                <option value="thisweek" selected>This Week</option>
                                                                <option value="nextweek">Next Week</option>
                                                                <option value="quarter">Quarter</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    
                                                    <div class="form-check form-switch mt-3">
                                                        <input class="form-check-input" type="checkbox" id="new-algo-status" disabled>
                                                        <label class="form-check-label" for="new-algo-status">Active</label>
                                                    </div>
                                                    
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" onclick="closeAlgoModal()">Cancel</button>
                                                <button type="button" class="btn btn-dark" onclick="saveAlgo()">Save</button>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </div>
            

            </div>

            <!-- Order Management System Section -->
            <div id="securedContentOMS" class="col " style="display: none;">
                <div class="card p-3" style="max-height: 500px;">
                    <!-- <h2 class="text-center">Order Management System (Prototype)</h2> -->

                    <!-- Tabs -->
                    <ul class="nav nav-tabs flex-wrap" id="omsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="btn nav-link active" data-bs-toggle="tab" data-bs-target="#assets-positions" type="button" role="tab">Assets & Positions</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="btn nav-link" data-bs-toggle="tab" data-bs-target="#open-orders" type="button" role="tab">Open Orders</button>
                        </li>
                    
                    </ul>
                    <div class="tab-content mt-3">
                        <!-- Assets & Positions Tab -->
                        <div class="tab-pane fade show active" id="assets-positions" role="tabpanel">
                            
                            <p >
                                <button id="positions-refresh-btn" class="btn btn-dark btn-sm  mb-2" onclick="populatePositions()">Refresh</button>
                                
                                <tag class="text-end float-end text-muted">
                                    Last updated: <span id="last-updated-positions">-</span>
                                </tag>
                            </p>
    


                            <!-- <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                                <table class="table table-borderless table-hover  text-nowrap w-100 OMStable">
                                    <thead class="table-primary  sticky-top">
                                        <tr>
                                            <th >Exchange</th>
                                            <th >Instrument ID</th>
                                            <th >Lev</th>
                                            <th >Position (Buy/Sell)</th>
                                            <th >ADL</th>
                                            <th >Liquidation Price</th>
                                            <th >Avg Price</th>
                                            <th >PnL</th>
                                            <th >Ts</th>
                                        </tr>
                                    </thead>
                                    <tbody id="oms-open-positions-body">
                                    </tbody>
                                </table>
                            </div> -->

                            <div class="table-responsive" style="max-height: 400px;">
                                <table class="table table-borderless table-hover text-nowrap w-100 OMStable">
                                    <thead class="table-light sticky-top">
                                        <tr>
                                            <th class="text-center" width="12%">Exchange</th>          <!-- Left-aligned -->
                                            <th class="text-center" width="13%">Instrument ID</th>     <!-- Left-aligned -->
                                            <th class="text-center" width="8%" >Lev</th>               <!-- Centered -->
                                            <th class="text-center" width="12%">Position (Buy/Sell)</th><!-- Centered -->
                                            <th class="text-center" width="8%" >ADL</th>              <!-- Centered -->
                                            <th class="text-center" width="15%">Liquidation Price</th><!-- Centered -->
                                            <th class="text-center" width="12%">Avg Price</th>        <!-- Centered -->
                                            <th class="text-center" width="10%">PnL</th>              <!-- Centered -->
                                            <th class="text-center" width="20%">Ts</th>
                                        </tr>
                                    </thead>
                                    <tbody id="oms-open-positions-body">
                                        <!-- Dynamic rows inserted here -->
                                    </tbody>
                                </table>
                            </div>

                        </div>



                        <!-- Open Orders Tab -->
                        <div class="tab-pane fade" id="open-orders" role="tabpanel">
                        
                            <div>
                                <!-- First button (aligned left) -->
                                <button id="positions-refresh-btn" class="btn btn-dark btn-sm mb-2" onclick="populateOpenOrders()">Refresh</button>
                                <!-- Last updated (aligned right) -->
                                <tag class="text-end float-end text-muted">
                                    Last updated: <span id="last-updated-orders">-</span>
                                </tag>
                                <!-- Second and third buttons (centered) -->
                                <!-- BUTTONS DANGEROUS -->
                                <!-- <div class="d-flex justify-content-center align-items-center mb-2">
                                    <select id="clearCurrencyDropdown" class="form-select form-select-sm mx-2" style="width: auto;">
                                        <option value="all" selected>All Currencies</option>
                                        <option value="BTC-USD-SWAP">BTC-USD-SWAP</option>
                                    </select>
                                 
                                    <button id="positions-clear-all-btn" class="btn btn-danger btn-sm mx-2" onclick="clearPositions('all')" disabled>Clear All</button>
                                    <button id="positions-clear-okx-btn" class="btn btn-warning btn-sm mx-2" onclick="clearPositions('okx')" disabled>Clear OKX</button>
                                    <button id="positions-clear-htx-btn" class="btn btn-warning btn-sm mx-2" onclick="clearPositions('htx')" disabled>Clear HTX</button>
                                    <button id="lock-clear-btn" class="btn btn-secondary btn-sm mx-2" onclick="toggleLockClear()">üîí Unlock</button>
                                </div> -->
                            
                            </div>
                            
                        
                            

                            <div class="table-responsive" style="max-height: 400px">
                                <table class="table table-borderless  table-hover  text-nowrap w-100 OpenOrdersTable">
                                    <thead class="table  sticky-top">
                                        <tr>
                                            <th class="text-center" width="10%"> Exchange</th>
                                            <th class="text-center" width="10%"> Symbol</th>
                                            <th class="text-center" width="15%"> Lev</th>
                                            <th class="text-center" width="15%"> Side</th>
                                            <th class="text-center" width="5%"> Fill / Order Price</th>
                                            <th class="text-center" width="5%" > Filled / Total</th>
                                            <th class="text-center" width="10%"> Status / Order #</th>
                                            <th class="text-center" width="10%"> Order Time</th>
                                            <th class="text-center" width="20%">Action 2</th>
                                        </tr>
                                    </thead>
                                    <tbody id="oms-open-orders-body">
                                        <!-- Dynamic rows inserted here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            
                            
                            
                        </div>

                    </div>
                    
                </div>
            </div>

            <!-- Placeholder Modal - will not be displayed. only displayed when button is pressed-->
            <div id="modifyPositionModal" class="modal" tabindex="-1" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Modify Position</h5>
                            <button type="button" class="btn-close" onclick="closeModifyOrderModal()"></button>
                        </div>
                        <div class="modal-body">
                            <form id="modifyPositionForm">
                                <!-- Form fields will be dynamically added here -->
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="closeModifyOrderModal()">Cancel</button>
                            <button type="submit" form="modifyPositionForm" class="btn btn-dark">Submit</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <script src="./websocket_client/js/twiliocall.js"></script>
        <script src="./websocket_client/js/auth.js"></script>
        <script src="websocket_client/js/util.js"></script>
        <script src="https://cdn.socket.io/4.8.0/socket.io.min.js"></script>
        <script src="websocket_client/js/wsConnections.js"></script>
        <script src="websocket_client/js/display_last_trade.js"></script>
        <script src="websocket_client/js/display_orderbook.js"></script>
        <script src="websocket_client/js/display_position.js"></script>
        <script src="websocket_client/js/display_open_orders.js"></script>
        <script src="websocket_client/js/arbButton.js"></script>
        <!-- <script src="websocket_client/js/createAlgoOrders.js"></script> -->
        <!-- <script src="websocket_client/js/display_trade_history.js"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
        
        <script src="websocket_client/js/display_fundingrate.js"></script>

        <script>

            let shouldScrollState = {}


            // Clear JWT token from localStorage when no longer needed
            function clearAuthToken() {
                localStorage.removeItem('jwt_token');
            }

            // Clear notifications when user logs out or navigates away
            function clearAllDataOnLogout() {
                clearAuthToken();
                clearNotifications();
            }

            // Remove event listener when no longer needed
            window.removeEventListener('beforeunload', () => {
                clearAuthToken();
                clearNotifications();
            });


            let currency_pair = null;
            
            function getAuthToken() {
                return localStorage.getItem('jwt_token');  // You can change this to sessionStorage if needed
            }

            function updateExchange(which) {
                    // let shouldScroll = !container.dataset.hasScrolled;
                    const scrollableOrdebook = document.getElementById(`scrollable-orderbook-${which}`);
                    // console.log(which)
                    // scrollableOrdebook.dataset.hasScrolled = 'true'
                    // shouldScrollState[which] = !scrollableOrdebook.dataset.hasScrolled;
                    // console.log(shouldScrollState[which])

                    const exchangeId = `exchange${which}-input`;
                    const wrapperId = `htx-open-close-wrapper${which}`;
                    const selectedExchange = document.getElementById(exchangeId).value.toLowerCase();
                    const wrapper = document.getElementById(wrapperId);
                    const dropdown = document.getElementById(exchangeId);

                    // Show/Hide HTX-specific dropdown
                    if (selectedExchange === 'htx') {
                        wrapper.style.visibility = 'visible';
                    } else {
                        wrapper.style.visibility = 'hidden';
                    }

                    // Temporarily disable dropdown to avoid race condition / coroutine issues
                    dropdown.disabled = true;

                    // Send WebSocket message or whatever async operation here
                    if (which === 1 && typeof socket1 !== 'undefined') {
                        const input_data = {
                            action: "change",
                            ccy: document.getElementById('currency-input-orderbook1').value,
                            exchange: selectedExchange,
                            market_type: document.getElementById('market-type-orderbook1')?.value || ""
                        };
                        socket1.send(JSON.stringify(input_data));
                    }

                    if (which === 2 && typeof socket2 !== 'undefined') {
                        const input_data = {
                            action: "change",
                            ccy: document.getElementById('currency-input-orderbook2').value,
                            exchange: selectedExchange,
                            market_type: document.getElementById('market-type-orderbook2')?.value || ""
                        };
                        socket2.send(JSON.stringify(input_data));
                    }

                    // Re-enable after delay (adjust time as needed)
                    setTimeout(() => {
                        dropdown.disabled = false;
                    }, 1500); // 1.5s delay to let coroutine settle
                }




            // Check if the JWT token is present and display the corresponding content
            function checkJWTAndDisplay() {
                const token = getAuthToken();
                // Get the elements by ID
                const securedContent = document.getElementById('securedContent');
                const securedContentOMS = document.getElementById('securedContentOMS');
                const securedContentBidAskOrder = document.getElementById('securedContentBidAskOrder');

                // securedContentBidAskOrder
                const loginPrompt = document.getElementById('loginPrompt');
                var loginPromptBtn = document.getElementById('loginPromptBtn');

                

                if (token) {
                    // If the token is present, show the secured content
                    securedContent.style.display = 'block';
                    securedContentOMS.style.display = 'block';
                    securedContentBidAskOrder.style.display = 'block';

                    loginPrompt.style.display = 'none';
                    loginPromptBtn.style.display = 'none';

                } else {
                    // If the token is not present, show the login prompt
                    securedContent.style.display = 'none';
                    securedContentOMS.style.display = 'none';
                    securedContentBidAskOrder.style.display = 'none';

                    loginPrompt.style.display = 'block';
                    loginPromptBtn.style.display = 'block';
                    
                }
            }

            // Run the function to check the JWT token and display appropriate content
            checkJWTAndDisplay();

            // Array to store notifications
            const notifications = [];
            
            function updateNotificationHub() {
    const toastList = document.getElementById('toast-list');
    toastList.innerHTML = ''; // Clear previous notifications

    notifications.forEach(notification => {
        const toastItem = document.createElement('div');
        toastItem.className = 'toast-item p-2 border-bottom';

        const timestamp = new Date().toLocaleTimeString();

        toastItem.innerHTML = `
            <div class="d-flex justify-content-between align-items-center" style="text-align:left;width:800px">
                <div style = "">${notification}</div>
                <span class="badge bg-light text-muted" style="font-size: 0.7rem;">${timestamp}</span>
            </div>
        `;

        

        toastList.prepend(toastItem); // Add newest at top
    });
}



            // Toggle Notification Hub visibility
            function toggleNotificationHub() {
                const hub = document.getElementById('notification-hub');
                hub.style.display = hub.style.display === 'none' ? 'block' : 'none';
            }

            // Update notification count
            function updateNotificationCount() {
                const count = notifications.length;
                document.getElementById('notification-count').innerText = count;
            }

            // Clear all notifications
            function clearNotifications() {
                notifications.length = 0;
                updateNotificationHub();
                updateNotificationCount();
            }

            // Function to update the table for the selected currency
            function updateTableForCurrency(currency) {
                // console.log(currency_pair)
                
                document.querySelector('h4').innerText = `Order Book Comparison for ${currency}`;
                // TODO: Fetch new data and update order books dynamically here
                alert(`Order books updated for ${currency}`);
                currency_pair = currency
                // console.log(currency_pair)
            }


        // $('.OMStable').DataTable({
        //     autoWidth: false,
        //     paging: true,
        //     searching: true,
        //     ordering: true,
        //     info: true,
        //     pageLength: 10,        // Default number of rows per page
        //     lengthMenu: [5, 10, 25, 50], // Dropdown menu for page length
        //     order: [[1, 'asc']],   // Default sorting (e.g., by Instrument ID)
        //     language: {
        //         search: "Filter records:", // Customize search input placeholder
        //         lengthMenu: "Display _MENU_ records per page"
        //     }
        // });

        // $('.OpenOrdersTable').DataTable({
        //     paging: true,
        //     searching: true,
        //     ordering: true,
        //     info: true,
        //     pageLength: 10,        // Default number of rows per page
        //     lengthMenu: [5, 10, 25, 50], // Dropdown menu for page length
        //     order: [[1, 'asc']],   // Default sorting (e.g., by Instrument ID)
        //     language: {
        //         search: "Filter records:", // Customize search input placeholder
        //         lengthMenu: "Display _MENU_ records per page"
        //     }
            
        // });

        // $('').DataTable({
        //     paging: true,
        //     searching: true,
        //     ordering: true,
        //     info: true,
        //     pageLength: 10,        // Default number of rows per page
        //     lengthMenu: [5, 10, 25, 50], // Dropdown menu for page length
        //     order: [[1, 'asc']],   // Default sorting (e.g., by Instrument ID)
        //     language: {
        //         search: "Filter records:", // Customize search input placeholder
        //         lengthMenu: "Display _MENU_ records per page"
        //     }
            
        // });
        // Assuming you have a table with id "example" in your HTML
        document.addEventListener('DOMContentLoaded', function() {
            const ordersTable = new DataTable('.OpenOrdersTable',{
            paging: true,
            searching: true,
            ordering: true,
            info: true,
            pageLength: 10,        // Default number of rows per page
            lengthMenu: [5, 10, 25, 50], // Dropdown menu for page length
            order: [[1, 'asc']],   // Default sorting (e.g., by Instrument ID)
            language: {
                search: "Filter records:", // Customize search input placeholder
                lengthMenu: "Display _MENU_ records per page"
            }
                
              
            
        })

            const table = new DataTable('.OMStable', {
                paging: true,
                searching: true,
                ordering: true,
                info: true,
                pageLength: 10,
                lengthMenu: [5, 10, 25, 50],
                order: [[1, 'asc']],
                language: {
                    search: "Filter records:",
                    lengthMenu: "Display _MENU_ records per page"
                },
                scrollY: 'calc(400px - 60px)', // Adjust for header height
                scrollCollapse: true,
                autoWidth: false,
                fixedColumns: {
                    left: 1 // Fix first column (Exchange)
                },
                columnDefs: [
                    { targets: 0, className: 'text-left' },    // Exchange
                    { targets: 1, className: 'text-left' },    // Instrument ID
                    { targets: 2, className: 'text-center' },  // Leverage
                    { targets: 3, className: 'text-right' },   // Position
                    { targets: 4, className: 'text-center' },  // ADL
                    { targets: 5, className: 'text-right' },   // Liquidation Price
                    { targets: 6, className: 'text-right' },   // Avg Price
                    { targets: 7, className: 'text-right' },   // PnL
                    { targets: 8, className: 'text-left' }     // Timestamp
                ],
                initComplete: function() {
                    this.api().columns.adjust().draw();
                }
            });
        });
        
        </script>
        
<style>
/* Text alignment */
/* body{
    margin:0;
    padding:0;
    overflow-x:hidden;
} */

/* Numeric columns (right-aligned by default in DataTables) */

.hidden {
  visibility: hidden;  /* Hides the element but keeps its space */
}

/* Header alignment to match data */
/* Table container */
.dataTables_wrapper {
    width: 100%;
    overflow: hidden;
}

/* Fixed table layout */
.OMStable {
    table-layout: fixed;
    width: 100% !important;
    margin: 0;
    border-collapse: collapse;
}

/* Header styling */
.OMStable thead th {
    text-align: left;
    padding: 10px 15px;
    font-weight: 600;
    border-bottom: 2px solid #dee2e6;
    position: sticky;
    top: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}


/* Cell styling */
.OMStable td {
    vertical-align: middle;
    padding: 8px 15px;
    border-bottom: 1px solid #dee2e6;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
  /* Table container */
  .table-responsive {
        position: relative;
        /* border: 1px solid #dee2e6; */
        /* border-radius: 4px; */
    }
    
    /* Table styling */
    .OMStable {
        table-layout: fixed;
        width: 100% !important;
        margin: 0;
    }
    
    /* Header styling */
    .OMStable thead th {
        position: sticky;
        top: 0;
        font-weight: 600;
        padding: 12px 8px;
        vertical-align: middle;
        border-bottom: 2px solid #dee2e6;
    }
    
    /* Cell styling */
    .OMStable td {
        padding: 8px;
        vertical-align: middle;
        border-bottom: 1px solid #f0f0f0;
    }
    
    /* Hover effect */
    .OMStable tbody tr:hover td {
        background-color: #f8f9fa;
    }
    
    
    /* Empty message styling */
    .dataTables_empty {
        text-align: center !important;
        padding: 20px !important;
        font-style: italic;
        color: #6c757d;
    }
    
    /* Scrollbar styling */
    .table-responsive::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }
    .table-responsive::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
    }
            
            .normal-text{
                color:black
            }

            .header-text{
                font-family: 'Orbitron', sans-serif;
                color:black
            }

            .form-control{
                font-size:small;
                /* color:#ddd */
                color:black
            }

            .algo-order-form-control{
                font-size: small;
                padding-left:5px;
                padding-right:5px;
                width:100%;
            }
        
            .navbar-brand{
                font-family: 'Orbitron', sans-serif;
                font-size: 2.75rem;
                letter-spacing: 1px;
            }

            .welcome-text{
                color: #ffffff;

            }
            .background{
                /* background-color:rgba(1, 14, 4, 0.512) */

            }

            .nav-pills .nav-link.active{
                background-color: black;
            }
            .nav-link{
                color: grey;
            }

            .alert-dark{
                /* background-color:rgba(99, 1, 1, 0.707) */
            }

            .alert{
                margin:0;
            }
           
          
           
            /* Make sure the parent container is a flex container */
            .orderbook-container {
                width:70%;
                display: flex;
                justify-content: space-between;  /* Ensure orderbooks are side by side */
                gap: 15px; /* Space between each orderbook */

            }

            /* th, td {
                width: 25%; 
                overflow: hidden;
                text-align: center;
            
            } */
            
            .btn{
                font-family: 'Orbitron', sans-serif;

            }
            
            /* Set a fixed width for each orderbook container */
            .scrollable-orderbook {
                max-height: 290px;
                box-sizing: border-box;
                }

               .scrollable-orderbook th, td {
                width: 25%; 
                overflow: hidden;
                text-align: center;
            
            }

            .scrollable-orderbook .asks ,.sell {
                color: red !important
            }

            /* Style for Bids (Green) */
            .scrollable-orderbook .bids , .buy {
                color: green;
            }

        

            .scrollable-lastprice {
                max-height: 300px; /* Set a fixed height for uniformity */
                    overflow-y: auto;  /* Enable vertical scrolling */
                    border: 1px solid #ddd;  /* Optional border styling */
                    /* padding: 10px; */
                    /* background-color: #f9f9f9; Light background for better readability */
                    display: flex;
                    flex-direction: column;
                    gap: 5px;  /* Add gap between asks and bids */
                    box-sizing: border-box; /* Include padding and border in the element's total width */
                    scroll-behavior: smooth;  /* Smooth scrolling for a better experience */
                    scrollbar-width: thin; 
                }


            /* Optional: Ensures each ask/bid has a consistent font size and line height */
                       /* Style for Asks (Red) */
           
            .run-button {
                    color: #1db954; /* Spotify green */
                    cursor: pointer;
                    font-size: 1.5rem;
                    transition: transform 0.2s ease;
                }
            .stop-button {
                color: #df0d0d; /* Spotify green */
                cursor: pointer;
                font-size: 1.5rem;
                transition: transform 0.2s ease;
            }
                

            /* algo table */
            .algo-table {
                max-height: 550px; /* Set a fixed height for uniformity */
                overflow-y: auto;  /* Enable vertical scrolling */
                padding: 10px;
                scroll-behavior: smooth;  /* Smooth scrolling for a better experience */
                scrollbar-width: thin; 
            }
        </style>
</body>

</html>